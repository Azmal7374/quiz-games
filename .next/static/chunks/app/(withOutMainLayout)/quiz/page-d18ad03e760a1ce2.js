(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[749],{6685:(e,a,t)=>{Promise.resolve().then(t.bind(t,68715))},68715:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>f});var r=t(95155),o=t(12115),s=t(82651),i=t(53890),n=t(31303),l=t(51614),c=t(21549),d=t(85617),h=t(80332),m=t(30814),u=t(79995),g=t(57902),x=t.n(g),p=t(76046);let f=()=>{let e=(0,p.useRouter)(),[a,t]=(0,o.useState)(""),[g,f]=(0,o.useState)(""),[j,v]=(0,o.useState)(""),[w,y]=(0,o.useState)([]),[b,N]=(0,o.useState)(""),[C,R]=(0,o.useState)(""),[S,A]=(0,o.useState)(!1),[E,I]=(0,o.useState)(""),[P,_]=(0,o.useState)(null),[k,D]=(0,o.useState)(null),U=Math.random().toString(36).substr(2,6).toUpperCase(),Q=async()=>{if(!a.trim()){m.oR.error("Error creating room, please try again!Please enter your name before creating a room!",{duration:5e3,icon:"⚠️"});return}let t=await u.toDataURL(U);try{let r={username:a,quizCategories:w,timer:Number(j)||10,roomCode:U,qrCode:t},o=await s.A.post("https://trivia-web-server-production.up.railway.app/api/room/create",r);201===o.status?(N("https://brain-bitz-quiz-game.vercel.app/room?roomId=".concat(U,"&username=").concat(a)),R(t),e.push("/room?roomId=".concat(U,"&username=").concat(a))):m.oR.error("Error creating room, please try again!",{duration:5e3,icon:"⚠️"})}catch(e){m.oR.error("An unexpected error occurred. Please try again.",{duration:5e3,icon:"⚠️"})}},T=async()=>{if(!g.trim()){m.oR.error("Please enter a valid room code!",{duration:5e3,icon:"⚠️"});return}try{let t=await s.A.post("https://trivia-web-server-production.up.railway.app/api/room/join",{roomCode:g,username:a});200===t.status?e.push("/room?roomId=".concat(g,"&username=").concat(a)):m.oR.error("Room not found, please check the code and try again!",{duration:5e3,icon:"⚠️"})}catch(e){m.oR.error("An error occurred while joining the room!",{duration:5e3,icon:"⚠️"})}};return(0,o.useEffect)(()=>{let e=async()=>{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});D(e);let a=document.getElementById("qr-video");a.srcObject=e,a.play();let t=document.createElement("canvas"),r=t.getContext("2d");if(r&&a){let e=()=>{if(a.readyState===a.HAVE_ENOUGH_DATA){t.width=a.videoWidth,t.height=a.videoHeight,r.drawImage(a,0,0,t.width,t.height);let e=r.getImageData(0,0,t.width,t.height),o=x()(e.data,t.width,t.height);o&&f(o.data)}requestAnimationFrame(e)};e()}}};return S?e():k&&k.getTracks().forEach(e=>e.stop()),()=>{k&&k.getTracks().forEach(e=>e.stop())}},[S,k]),(0,r.jsxs)("div",{className:"flex flex-col items-center p-4 space-y-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-green-400",children:"Quiz App Home"}),(0,r.jsxs)("div",{className:"w-full max-w-md",children:[(0,r.jsx)("p",{className:"mb-2",children:"Name:"}),(0,r.jsx)(i.r,{placeholder:"Pick a name!",value:a,onChange:e=>t(e.target.value),fullWidth:!0})]}),(0,r.jsxs)("div",{className:"flex flex-wrap justify-center gap-8 w-full max-w-4xl",children:[(0,r.jsxs)(c.Z,{className:"p-4 w-full max-w-sm",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold",children:"Create Room"}),(0,r.jsx)(n.f,{y:.5}),(0,r.jsx)("h2",{children:"Question Timer (seconds):"}),(0,r.jsx)(i.r,{placeholder:"Enter timer duration",value:j,onChange:e=>v(e.target.value),fullWidth:!0}),(0,r.jsx)(n.f,{y:1}),(0,r.jsx)("h2",{children:"Select Quizzes:"}),(0,r.jsxs)(d._,{value:w,onChange:y,className:"mt-4",children:[(0,r.jsx)(h.A,{value:"General Knowledge",children:"General Knowledge"}),(0,r.jsx)(h.A,{value:"Science",children:"Science"}),(0,r.jsx)(h.A,{value:"History",children:"History"}),(0,r.jsx)(h.A,{value:"Geography",children:"Geography"})]}),(0,r.jsx)(n.f,{y:1.5}),(0,r.jsx)(l.T,{className:"bg-green-400",onPress:Q,children:"Create a Lobby"})]}),(0,r.jsxs)(c.Z,{className:"p-4 w-full max-w-sm",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold",children:"Join Lobby"}),(0,r.jsx)(n.f,{y:.5}),(0,r.jsx)("h2",{children:"Room Code:"}),(0,r.jsx)(i.r,{placeholder:"Room Code",value:g,onChange:e=>f(e.target.value),fullWidth:!0}),(0,r.jsx)(n.f,{y:1.5}),(0,r.jsx)(l.T,{className:"bg-green-400",onPress:T,children:"Join a Lobby"}),(0,r.jsx)(n.f,{y:1.5}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"Or Scan QR Code:"}),(0,r.jsx)(l.T,{className:"bg-green-400",onPress:()=>A(!0),children:"Scan QR Code"}),S&&(0,r.jsxs)("div",{children:[(0,r.jsx)("video",{id:"qr-video",className:"w-full h-auto"}),E&&(0,r.jsx)("p",{className:"text-red-500",children:E})]})]}),(0,r.jsx)(n.f,{y:1.5}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"Or Upload QR Code Image:"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let a=e.target.files?e.target.files[0]:null;if(a){_(a);let e=new FileReader;e.onload=()=>{let a=new Image;a.src=e.result,a.onload=()=>{let e=document.createElement("canvas"),t=e.getContext("2d");if(t){e.width=a.width,e.height=a.height,t.drawImage(a,0,0);let r=t.getImageData(0,0,e.width,e.height),o=x()(r.data,e.width,e.height);if(o){let e=new URL(o.data).searchParams.get("roomId");e&&(console.log(e),f(e))}else m.oR.error("No QR code detected in the image!",{duration:5e3,icon:"⚠️"})}}},e.readAsDataURL(a)}}})]})]})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[153,524,614,814,549,238,890,100,441,517,358],()=>a(6685)),_N_E=e.O()}]);